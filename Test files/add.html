<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="https://cdn.jsdelivr.net/npm/jsstore/dist/jsstore.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsstore/dist/jsstore.worker.min.js"></script>

  </head>
  <body>
    <input type="text" name="user" placeholder="user" id="user">
    <input type="text" name="pass" placeholder="password" id="pass">
    <input type="button" name="Submit" value="Submit" onclick="addProduct();">





    <script type="text/javascript">


var connection = new JsStore.Instance();
window.onload = function () {

  initiateDatabase();
  getDb();


}

function initiateDatabase(){

var DbName="ProductDatabase";
      connection.isDbExist(DbName).then(function(isExist) {
          if (isExist) { // checks if the database exists, if it does then opens it, else creates a whole new dataBase
              connection.openDb(DbName);
          } else {
              var databse=getDb();
              connection.createDb(database).then(function (tables){
                console.log(tables);
          });
      }).catch(function(err) {
          console.log(err);
          alert(err.message);
      });

}}
function getDb(){

      var productTable = {
        name: 'Product',
        columns: [
          {
              name: 'Id',
              primaryKey: true,
              autoIncrement: true
          },
          {
              name: 'Name',
              notNull: true,
              dataType: JsStore.DATA_TYPE.String
          },
          {
              name: 'Password',
              notNull: true,
              dataType: JsStore.DATA_TYPE.String
          },

        ]
      };
      var db = {
          name: "ProductDatabase",
          tables: [productTable]
      }
      return db;
    }






    function addProduct() {
      var UserName = document.getElementById("user").Value;
      var Password= document.getElementById("pass").Value;
        var Value = {
            Name: UserName,
            Password: Password
        };

        connection.insert({
            into: 'Product',
            values: [Value]
        }).then(function (rowsAdded) {
          if(rowsAdded > 0){
              alert("Successfully Added");
          }
        }).catch(function (err) {
            console.log(err);
            alert(err.message);
        })

    }
    </script>
  </body>
</html>
