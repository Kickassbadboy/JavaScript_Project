<!DOCTYPE html>
<html>
 <head>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta http-equiv="x-ua-compatible" content="ie=edge">
   <title></title>
   <!-- <style>
   html *
   {
      font-size: 15px !important;
      font-family: Arial !important;
   }
   </style> -->


   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">


   <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/js/bootstrap.min.js" integrity="sha384-vZ2WRJMwsjRMW/8U7i6PWi6AlO1L79snBrmgiDpgIWJ82z8eA5lenwvxbMV1PAh7" crossorigin="anonymous"></script>
 <body>


 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/js/bootstrap.min.js" integrity="sha384-vZ2WRJMwsjRMW/8U7i6PWi6AlO1L79snBrmgiDpgIWJ82z8eA5lenwvxbMV1PAh7" crossorigin="anonymous"></script>
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

 <title>Creating Product Bill</title>
 <!--write js here-->
 <script>
   function inputPrice()
{
var newobj = document.createElement('div');
newobj.innerHTML=document.getElementById('div1').innerHTML;
document.getElementById('newdiv').appendChild(newobj);
}
</script>
<script>

function myCreateFunction() {

  // Deleted srno obj, variable and cell
  //var edit=document.createElement(<a href="#"><span class="glyphicon glyphicon-trash"></a></span></center>);
  var productName=document.getElementById('pname').value;
  var price=document.getElementById('price').value;
  var Quantity=document.getElementById('qty').value;
  var total=price*Quantity;


  if(productName=="" && price=="" && Quantity=="")
  {
    alert("Please enter values");

  }
    else {

    var table = document.getElementById("myTable");
   var row = table.insertRow(1);
    // var cell1 = row.insertCell(0);
    var cell2 = row.insertCell(0);
    var cell3=row.insertCell(1);
    var cell4=row.insertCell(2);
    var cell5=row.insertCell(3);
    cell2.innerHTML = productName;
    cell3.innerHTML = price;
    cell4.innerHTML = Quantity;


  cell5.innerHTML="edit";
  //cell5.setAttribute("onclick","deleteRow(this)");
  cell5.setAttribute("class","glyphicon glyphicon-pencil");

  cell6.innerHTML="delete";
  cell6.setAttribute("onclick","deleteRow(this)");
  cell6.setAttribute("class","glyphicon glyphicon-trash");

}



   //cell5.setAttribute("span","ce")
  // cell6.innerHTML=edit;
// <div>
//    <table>
//    <tr>
//       <td><center><a href="#"><span class="glyphicon glyphicon-pencil"></a></span></center></td>
//       <td><center><a href="#"><span class="glyphicon glyphicon-trash"></a></span></center></td>
//     </tr>
//     </table>
//   </div>

}

function deleteData()
{
  var index,table=document.getElementById("myTable");
  for(var i=0;i<table.rows.length;i++)
  {
    table.row[i].cells[4].onclick=function()
    {
      index=this.parentElement.rowIndex;
      table.deleteRow(index);
      console.log(index);
    };
  }
}


// function deleteRow(r) {
//     var i = r.parentNode.parentNode.rowIndex;
//     document.getElementById("myTable").deleteRow(i);
// }

</script>
 <style>
   /* Set height of the grid so .sidenav can be 100% (adjust as needed) */
 .row.content {height:900px;}

 /* Set gray background color and 100% height*/
 .sidenav {
   background-color: #f1f1f1;
   height: 100%;
 }

 /* On small screens, set height to 'auto' for the grid */
 @media screen and (max-width: 767px) {
   .row.content {height: auto;}
 }
</style>
</head>

<body>
 <nav class="navbar navbar-inverse visible-xs">
     <div class="container-fluid">
       <div class="navbar-header">
         <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
           <span class="icon-bar"></span>
           <span class="icon-bar"></span>
           <span class="icon-bar"></span>
         </button>
         <a class="navbar-brand" href="#">Logo</a>
       </div>
       <div class="collapse navbar-collapse" id="myNavbar">
         <ul class="nav navbar-nav">
           <li class="active"><a href="#">Hello</a></li>
           <li ><a href="Dashboard.html">Dashboard</a></li>
           <li><a href="generateBill.html">Generate Bill</a></li>
           <li class="active"><a href="product.html">Product</a></li>
         </ul>
       </div>
     </div>
   </nav>

<div class="container-fluid">
 <div class="row content">
   <div class="col-sm-3 sidenav hidden-xs">
     <center><img src="images/logo.jpg" width="100" height="100"></center><!--Show the image icon of invoice -->
     <ul class="nav nav-pills nav-stacked">
       <li ><a href="Dashboard.html">Dashboard</a></li>
       <li><a href="generateBill.html">Generate Bill</a></li>
       <li class="active"><a href="product.html">Product</a></li>

     </ul><br>
   </div>




     <div class="col-sm-9">
       <div id="div1">
       <table class="table table-bordered" id="myTable">
         <thead>
           <tr>
             <th>Product Name</th>
             <th>Price</th>
             <th>Quantity</th>
             <th>Edit</th>
             <th>Delete</th>
           </tr>
         </thead>
         <tbody>
           <tr>
             <td><input type="text" class="form-control" placeholder="Enter Product Name"></td>
             <td><input type="text" class="form-control" placeholder="Enter Price"></td>
             <td><input type="text" class="form-control" placeholder="Enter Qty"></td>

             <td id='gly1'><center><a href="#"><span class="glyphicon glyphicon-pencil"></a></span></center></td>
             <td id='gly2'><center><a href="#"><span class="glyphicon glyphicon-trash"></a></span></center></td>

           </tr>

         </tbody>
       </table>
     </div>
       <div id="newdiv">
         <div>

         </div>
       </div>

       <div>
         <input type="button" name="button1" value="Add more" onclick="myCreateFunction();">
       </div>


     </div>

   </div>
 </div>
 <script type="text/javascript">
 var connection = new JsStore.Instance(),ProductId;
 window.onload = function () {

 initiateDatabase();

 }

 function initiateDatabase(){

 var DbName="ProductDatabase";
  connection.isDbExist(DbName).then(function(isExist) {
       if (isExist) { // checks if the database exists, if it does then opens it, else creates a whole new dataBase
           connection.openDb(DbName).then(function (){
             console.log('db Opened');
           });
       } else {
           var database = getDb();
           connection.createDb(database).then(function (tables){
             console.log(tables);
           });
           addProduct();
       }
   }).catch(function(err) {
       console.error(err);
       alert(err.message);
   });

    }


    function addProduct() {
      var Product_Name = document.getElementById("Product_Name").value;
     var Product_Price= document.getElementById("Product_Price").value;
     var Product_Qty=document.getElementById('Product_Qty').value;

     var products=getProducts();
         var Value = {
           Product_Name: nameupdate,
             Product_Price: Passupdate,
             Product_Qty:productQty
       };

        connection.insert({
            into: 'Product',   //table name
            values: [Value]      //coloum
        }).then(function (rowsAdded) {
          if(rowsAdded > 0){
              alert("Successfully Added");
          }

        }).catch(function (err) {
            console.log(err);
            alert(err.message);
        });

    }
    function updateProduct(){
      var ProductId=document.getElementById('ProductId').value;
      var nameupdate=document.getElementById('user').value;
      var Passupdate=document.getElementById('pass').value;
      var Value = {
        Product_Name: nameupdate,
          Product_Price: Passupdate,
          Product_Qty:productQty

      };
      connection.update({ in: 'Product',
          set: Value,
          where: {
              Id: Number(ProductId)
          }
      }).then(function (rowsAffected) {
          alert(rowsAffected + " record Updated");
          if (rowsAffected > 0) {
              console.log("rows affected");
          }
      }).catch(function (err) {
          console.log(err);
          alert(err.message);
      })
    }


    function getDb(){

     var productTable = {
      name: 'Product',
       columns: [
         {
           name:'Id',
           primaryKey:true,
           autoIncrement:true
         },
         {
           name: 'Product_Name',
           notNull: true,
           dataType: "string"
         },
        {
           name: 'Product_Price',
           notNull: true,
           dataType: "number"
        },
        {
           name: 'Product_Qty',
           notNull: true,
           dataType: "number"
        }
        ]
        }
   var db = {
       name: "ProductDatabase",
       tables: [productTable]
   }
   return db;
 }


 function getProducts() {
     //product Array
     var Value = [{
             Name: 'Alfreds',
             Password: 'male',

         },
         {
         Name: 'Alfreds',
         Password: 'male',

         },
       ]
         return Value;
}
 </script>

</body>
 </html>
